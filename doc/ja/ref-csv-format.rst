.. _ref-csv-format:

=======================
CSVファイルフォーマット
=======================

テーブルメタデータCSV
=====================

テーブルメタデータをインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+-----------------+--------------------------+-------+
| フィールド名    | 内容                     | 必須? |
+=================+==========================+=======+
| DATABASE_NAME   | データベース名           | 必須  |
+-----------------+--------------------------+-------+
| SCHEMA_NAME     | スキーマ名               | 必須  |
+-----------------+--------------------------+-------+
| TABLE_NAME      | テーブル名               | 必須  |
+-----------------+--------------------------+-------+
| TABLE_NAME_NLS  | テーブル名（日本語表記） |       |
+-----------------+--------------------------+-------+
| TABLE_COMMENT   | テーブルコメント         |       |
+-----------------+--------------------------+-------+
| TAGS            | タグ（カンマ区切り）     |       |
+-----------------+--------------------------+-------+
| TABLE_OWNER     | 管理者                   |       |
+-----------------+--------------------------+-------+

テーブルコメントはMarkdown形式で記述することができます。

::

  DATABASE_NAME,SCHEMA_NAME,TABLE_NAME,TABLE_NAME_NLS,TABLE_COMMENT,TAGS,TABLE_OWNER
  ORCL,SCOTT,CUSTOMER,顧客テーブル,,,
  ORCL,SCOTT,LINEITEM,注文明細テーブル,,"TAG1,TAG2",
  ORCL,SCOTT,NATION,国名マスタ,,,
  ORCL,SCOTT,ORDERS,注文テーブル,,TAG1,
  ORCL,SCOTT,PART,商品マスタ,,,
  ORCL,SCOTT,PARTSUPP,商品・サプライヤ対応表,,TAG2,
  ORCL,SCOTT,REGION,地域マスタ,,,
  ORCL,SCOTT,SUPPLIER,サプライヤマスタ,,TAG2,


カラムメタデータCSV
===================

カラムメタデータをインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+-----------------+------------------------+-------+
| フィールド名    | 内容                   | 必須? |
+=================+========================+=======+
| DATABASE_NAME   | データベース名         | 必須  |
+-----------------+------------------------+-------+
| SCHEMA_NAME     | スキーマ名             | 必須  |
+-----------------+------------------------+-------+
| TABLE_NAME      | テーブル名             | 必須  |
+-----------------+------------------------+-------+
| COLUMN_NAME     | カラム名               | 必須  |
+-----------------+------------------------+-------+
| COLUMN_NAME_NLS | カラム名（日本語表記） |       |
+-----------------+------------------------+-------+
| COLUMN_COMMENT  | カラムコメント         |       |
+-----------------+------------------------+-------+
| FK              | 外部キー参照           |       |
+-----------------+------------------------+-------+

カラムコメントはMarkdown形式で記述することができます。

::

  DATABASE_NAME,SCHEMA_NAME,TABLE_NAME,COLUMN_NAME,COLUMN_NAME_NLS,COLUMN_COMMENT,FK
  ORCL,SCOTT,CUSTOMER,C_CUSTKEY,顧客ID,,
  ORCL,SCOTT,CUSTOMER,C_NAME,顧客名,,
  ORCL,SCOTT,CUSTOMER,C_ADDRESS,顧客住所,,
  ORCL,SCOTT,CUSTOMER,C_NATIONKEY,国名コード,,NATION.N_NATIONKEY
  ORCL,SCOTT,CUSTOMER,C_PHONE,電話番号,,
  ORCL,SCOTT,CUSTOMER,C_ACCTBAL,残高,,
  ORCL,SCOTT,CUSTOMER,C_MKTSEGMENT,業界,,
  ORCL,SCOTT,CUSTOMER,C_COMMENT,備考,,


スキーマコメントCSV
===================

スキーマコメントをインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+--------------------+------------------------+-------+
| フィールド名       | 内容                   | 必須? |
+====================+========================+=======+
| DATABASE_NAME      | データベース名         | 必須  |
+--------------------+------------------------+-------+
| SCHEMA_NAME        | スキーマ名             | 必須  |
+--------------------+------------------------+-------+
| SCHEMA_DESCRIPTION | スキーマの短い説明     | 必須  |
+--------------------+------------------------+-------+
| SCHEMA_COMMENT     | スキーマコメント       | 必須  |
+--------------------+------------------------+-------+

スキーマコメントはMarkdown形式で記述することができます。

::

  DATABASE_NAME,SCHEMA_NAME,SCHEMA_DESCRIPTION,SCHEMA_COMMENT
  ORCL,SCOTT,SCOTT用スキーマ,これはSCOTTスキーマです


タグコメントCSV
===============

タグコメントをインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+-----------------+------------------------+-------+
| フィールド名    | 内容                   | 必須? |
+=================+========================+=======+
| TAG_NAME        | タグ名                 | 必須  |
+-----------------+------------------------+-------+
| TAG_DESCRIPTION | タグの短い説明         | 必須  |
+-----------------+------------------------+-------+
| TAG_COMMENT     | タグコメント           | 必須  |
+-----------------+------------------------+-------+

タグコメントはMarkdown形式で記述することができます。

::

  TAG_NAME,TAG_DESCRIPTION,TAG_COMMENT
  タグ1,短いタグ説明,これはタグ1のコメントです


データマッピングCSV
===================

データマッピングのコンセプトや詳細について知りたい場合には、以下を参照してください:

* `Qamar Shahbaz; Data Mapping for Data Warehouse Design, 1st Edition; Elsevier, 2015 <https://www.elsevier.com/books/data-mapping-for-data-warehouse-design/shahbaz/978-0-12-805185-6>`_

データマッピングをインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+-------------------------+------------------------------+-------+
| フィールド名            | 内容                         | 必須? |
+=========================+==============================+=======+
| CHANGE_DATE             | 変更年月日                   | 必須  |
+-------------------------+------------------------------+-------+
| DATABASE_NAME           | 対象データベース名           | 必須  |
+-------------------------+------------------------------+-------+
| SCHEMA_NAME             | 対象スキーマ名               | 必須  |
+-------------------------+------------------------------+-------+
| TABLE_NAME              | 対象テーブル名               | 必須  |
+-------------------------+------------------------------+-------+
| COLUMN_NAME             | 対象カラム名                 |       |
+-------------------------+------------------------------+-------+
| DATA_TYPE               | データ型                     |       |
+-------------------------+------------------------------+-------+
| PK                      | 主キーかどうか               |       |
+-------------------------+------------------------------+-------+
| NULLABLE                | NULLを許容するかどうか       |       |
+-------------------------+------------------------------+-------+
| SOURCE_DATABASE_NAME    | データソースのデータベース名 |       |
+-------------------------+------------------------------+-------+
| SOURCE_SCHEMA_NAME      | データソースのスキーマ名     |       |
+-------------------------+------------------------------+-------+
| SOURCE_TABLE_NAME       | データソースのテーブル名     |       |
+-------------------------+------------------------------+-------+
| SOURCE_COLUMN_NAME      | データソースのカラム名       |       |
+-------------------------+------------------------------+-------+
| TRANSFORMATION_CATEGORY | 変換種別                     |       |
+-------------------------+------------------------------+-------+
| TRANSFORMATION_ROLE     | 変換ルール                   |       |
+-------------------------+------------------------------+-------+
| UPDATED_BY              | 更新者                       |       |
+-------------------------+------------------------------+-------+

``TRANSFORMATION_ROLE`` カラムに含まれる改行および空白スペースは、HTML表示する際には ``<br/>`` および ``&nbsp;`` に変換して表示されます。

::

  CHANGE_DATE,DATABASE_NAME,SCHEMA_NAME,TABLE_NAME,COLUMN_NAME,DATA_TYPE,PK,NULLABLE,SOURCE_DATABASE_NAME,RECORD_ID,SOURCE_SCHEMA_NAME,SOURCE_TABLE_NAME,SOURCE_COLUMN_NAME,TRANSFORMATION_CATEGORY,TRANSFORMATION_ROLE,UPDATED_BY
  2016-12-03,ORCL,SCOTT,ORDERS,O_ORDERDATE,DATE,,,ORCL,AAA01（応募）,DWH_AAA,APPLICATION,APP_DT,,TO_CHAR('YYYYMMDD'),snaga
  2016-12-03,ORCL,SCOTT,ORDERS,O_ORDERDATE,DATE,,,ORCL,BBB01（予約）,DWH_BBB,RESERVE,REGIST_DATE,無変換,,snaga
  2016-12-03,ORCL,SCOTT,ORDERS,O_ORDERDATE,DATE,,,ORCL,BBB02（キャンセル）,DWH_BBB,RESERVE,CANCEL_DATE,無変換,,snaga


ビジネス用語辞書CSV
===================

ビジネス用語辞書をインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+-------------------------+------------------------------+-------+
| フィールド名            | 内容                         | 必須? |
+=========================+==============================+=======+
| TERM                    | 単語                         | 必須  |
+-------------------------+------------------------------+-------+
| DESCRIPTION_SHORT       | 概要                         | 必須  |
+-------------------------+------------------------------+-------+
| DESCRIPTION_LONG        | 詳細                         | 必須  |
+-------------------------+------------------------------+-------+
| OWNER                   | 管理者                       | 必須  |
+-------------------------+------------------------------+-------+
| CATEGORIES              | カテゴリ                     |       |
+-------------------------+------------------------------+-------+
| SYNONYMS                | 同義語                       |       |
+-------------------------+------------------------------+-------+
| RELATED_TERMS           | 関連用語                     |       |
+-------------------------+------------------------------+-------+
| RELATED_ASSETS          | 関連テーブル                 |       |
+-------------------------+------------------------------+-------+

::

  TERM,DESCRIPTION_SHORT,DESCRIPTION_LONG,OWNER,CATEGORIES,SYNONYMS,RELATED_TERMS,RELATED_ASSETS
  顧客,「顧客」の定義。（概要版）,"# 顧客の定義（詳細版）
  
  * カスタマー
  * サプライヤー
  * アカウント
  
  Markdownで書けます。",snaga,カテゴリ1,"カスタマー","アカウント,サプライヤー","SCOTT.CUSTOMER,SCOTT.COMPANY, SUPPLIER"


データ検証ルールCSV
===================

データ検証ルールをインポートするためのCSVファイルは、以下のヘッダ行を含む必要があります。

+-----------------+----------------------------+-------+
| フィールド名    | 内容                       | 必須? |
+=================+============================+=======+
| DATABASE_NAME   | データベース名             | 必須  |
+-----------------+----------------------------+-------+
| SCHEMA_NAME     | スキーマ名                 | 必須  |
+-----------------+----------------------------+-------+
| TABLE_NAME      | テーブル名                 | 必須  |
+-----------------+----------------------------+-------+
| COLUMN_NAME     | カラム名                   | 必須  |
+-----------------+----------------------------+-------+
| DESCRIPTION     | ルールの説明（日本語表記） | 必須  |
+-----------------+----------------------------+-------+
| RULE            | ルール名                   | 必須  |
+-----------------+----------------------------+-------+
| PARAM           | 第1パラメータ              |       |
+-----------------+----------------------------+-------+
| PARAM2          | 第2パラメータ              |       |
+-----------------+----------------------------+-------+

データ検証ルールCSVの詳細については「:ref:`ref-validation-rule`」を参照してください。

